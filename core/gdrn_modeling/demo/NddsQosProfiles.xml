<?xml version="1.0"?>

<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="/opt/RTI/rti_connext_dds-6.1.1/resource/schema/rti_dds_profiles.xsd"
     version="6.1.1">

    <types>
		<struct name="SixDofPoseStruct">
			<member name="six_dof_pose_marker" type="double" arrayDimensions="16"/>
			<member name="six_dof_pose_pudding" type="double" arrayDimensions="16"/>
			<member name="six_dof_pose_banana" type="double" arrayDimensions="16"/>
		</struct>
	</types>

	<qos_library name="EinsteinQoSProfileLibrary">

		<qos_profile name="EinsteinDefaultQoS"
					base_name="BuiltinQosLibExp::Generic.KeepLastReliable.TransientLocal"
					is_default_qos="true">
			<datareader_qos>
				<resource_limits>
					<!--We have decided to use Topic Names, rather than keyed topics. There should only ever be 1 instance.-->
					<max_instances>1</max_instances>
					<initial_instances>1</initial_instances>
					<max_samples>80</max_samples>
					<max_samples_per_instance>80</max_samples_per_instance>
				</resource_limits>
			</datareader_qos>
			<subscriber_qos>
				<presentation>
					<access_scope>
						INSTANCE_PRESENTATION_QOS
					</access_scope>
				</presentation>
			</subscriber_qos>
			<datawriter_qos>
				<resource_limits>
					<max_instances>1</max_instances>
					<initial_instances>1</initial_instances>
					<max_samples>80</max_samples>
					<max_samples_per_instance>80</max_samples_per_instance>
				</resource_limits>
				<property>
					<value>
						<element>
							<name>dds.data_writer.history.memory_manager.fast_pool.pool_buffer_max_size</name>
							<value>4096</value>
						</element>
					</value>
				</property>
			</datawriter_qos>
		</qos_profile>

		
		<qos_profile name="EinsteinRealtimeControlData"
                     base_name="BuiltinQosLibExp::Generic.BestEffort"
                     is_default_qos="false">
			<datareader_qos>
				<reliability>
					<kind>BEST_EFFORT_RELIABILITY_QOS</kind>
				</reliability>
				<history>
					<kind>KEEP_LAST_HISTORY_QOS</kind>
					<depth>1</depth>
				</history>
			</datareader_qos>
			<datawriter_qos>
				<property>
					<value>
						<element>
							<name>dds.data_writer.history.memory_manager.fast_pool.pool_buffer_max_size</name>
							<value>4096</value>
						</element>
					</value>
				</property>
				<resource_limits>
					<initial_instances>1</initial_instances>
					<max_instances>1</max_instances>
				</resource_limits>
			</datawriter_qos>
		</qos_profile>
	</qos_library>

	<domain_library name="EinsteinCommunicationDomainLibrary">

		<domain name="SixDofPoseDomain">
			<register_type name="SixDofPoseType" kind="userGenerated" type_ref="SixDofPoseStruct"/>
			<topic register_type_ref="SixDofPoseType" name="SixDofPose">
				<topic_qos base_name="EinsteinQoSProfileLibrary::EinsteinRealtimeControlData"/>
			</topic>
		</domain>
	</domain_library>

	<participant_library name="HugoParticipantLibrary">
		<domain_participant name="SixDofPoseParticipant"
            domain_id="31"
            domain_ref="EinsteinCommunicationDomainLibrary::SixDofPoseDomain">
			<subscriber name="Sub">
				<data_reader topic_ref="SixDofPose" name="PoseReader">
					<datareader_qos base_name="EinsteinQoSProfileLibrary::EinsteinRealtimeControlData"/>
				</data_reader>
			</subscriber>
			<publisher name="Pub">
				<data_writer topic_ref="SixDofPose" name="PoseWriter">
					<datawriter_qos base_name="EinsteinQoSProfileLibrary::EinsteinRealtimeControlData"/>
				</data_writer>
			</publisher>
		</domain_participant>
    </participant_library>
</dds>
